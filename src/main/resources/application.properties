spring.application.name=SpringBoot-Agrolink

server.port=8080


# ==============================
# UPLOADS DE ARCHIVOS
# ==============================
spring.servlet.multipart.max-file-size=20MB
spring.servlet.multipart.max-request-size=25MB
# Habilitar el soporte multipart de Spring (estaba en false y puede causar que MultipartFile no se parseen)
spring.servlet.multipart.enabled=true
spring.servlet.multipart.file-size-threshold=2KB
spring.servlet.multipart.location=${java.io.tmpdir}


# L?mites de archivos en Tomcat
server.tomcat.max-swallow-size=20MB
server.tomcat.max-http-form-post-size=25MB

# ==============================
# RECURSOS EST?TICOS
# ==============================
spring.web.resources.static-locations=classpath:/static/
spring.web.resources.cache.period=0
# Desactivar cache de plantillas Thymeleaf en desarrollo para ver cambios sin recompilar
spring.thymeleaf.cache=false
# Suprimir warnings de recursos est?ticos no encontrados (como favicon.ico)
spring.mvc.log-resolved-exception=false

# ==============================
# CONEXI?N A LA BASE DE DATOS
# ==============================
spring.datasource.url=jdbc:mysql://localhost:3306/springbagrolink_db?createDatabaseIfNotExist=true&serverTimezone=UTC&zeroDateTimeBehavior=CONVERT_TO_NULL
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=root
spring.datasource.password=


# CONFIGURACI?N DE JPA / HIBERNATE
# =================================
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true

# ==============================
# GOOGLE MAPS API
# ==============================
# Obt?n tu API Key gratuita en: https://console.cloud.google.com/google/maps-apis
# Activa: Distance Matrix API y Geocoding API
# Gratuito hasta 40,000 solicitudes/mes
google.maps.api.key=TU_API_KEY_AQUI
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.generate-ddl=true


# Logging m?s detallado para ver la creaci?n/actualizaci?n de esquema
logging.level.org.hibernate.SQL=debug
logging.level.org.hibernate.tool.schema=DEBUG
logging.level.org.hibernate.tool.hbm2ddl=DEBUG
logging.level.org.hibernate.type.descriptor.sql=TRACE

# HikariCP - configuraci?n sencilla de pool de conexiones
# Valores recomendados para desarrollo; aj?stalos en producci?n seg?n la carga
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.pool-name=AgrolinkHikariCP
spring.datasource.hikari.validation-timeout=5000
# Desactivar leakage detection en dev (0 = deshabilitado). En prod puedes poner 20000 (20s) para detectar fugas.
spring.datasource.hikari.leak-detection-threshold=0
# Query de prueba (?til si el driver JDBC no soporta isValid). SELECT 1 funciona con MySQL.
spring.datasource.hikari.connection-test-query=SELECT 1
# Tiempo (ms) para fallar si la inicializaci?n del pool no puede obtener conexiones. -1 para intentar indefinidamente.
spring.datasource.hikari.initialization-fail-timeout=10000
